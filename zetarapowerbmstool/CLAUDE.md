# CLAUDE.md

## Общие правила работы

- **Не запускать сборку** — не пытаться самому запускать `./gradlew` или Android Studio билды. Предлагать пользователю сделать это самостоятельно
- **Не давать советы без запроса** — пока пользователь явно не попросит совет или рекомендацию, не давать их. Отвечать только на заданный вопрос, опираясь на доказательную базу
- **Визуализировать архитектуру и функционал** — при объяснении нового функционала или архитектурных решений:
  - Использовать ASCII-диаграммы и схемы
  - Приводить конкретные примеры из реальной жизни
  - Показывать структуру данных визуально (дерево, связи между сущностями)
  - Разбивать сложные концепции на простые сценарии
  - Это помогает понять общую картину перед началом разработки

---

## Поиск информации

- **Использовать MCP Firecrawl** — для всех поисков в интернете использовать инструменты:
  - `firecrawl_search` — поиск по запросу
  - `firecrawl_scrape` — получение контента страницы
  - `firecrawl_map` — карта сайта

---

## Git Workflow

### Правило для Claude
- **Никогда не пушить в main напрямую** — всегда создавать ветку и PR
- **Исключение: документация** — файлы `.md` можно пушить напрямую в main
- Пользователь сам решает как мержить (через GitHub или напрямую)

### Коммиты
- **Без копирайтов** — не добавлять "Generated with Claude Code" или "Co-Authored-By"
- Формат: краткое описание (50 символов max)

### Ветки
- `main` — стабильная версия, только через PR
- `feature/название` — новый функционал
- `fix/описание` — исправления
- `docs/что-обновляем` — документация

### Pull Requests
1. Ветка → Разработка → Тест → PR → Merge

### После мержа PR
```bash
git checkout main
git pull
git branch -d <имя-ветки>
```

---

## Структура проекта

```
zetarapowerbmstool/
├── app/
│   ├── src/
│   │   ├── main/           # Общий код
│   │   └── battery/        # Flavor для Battery Monitor
│   └── build.gradle        # Конфигурация модуля
├── FastBleLib/             # BLE библиотека
└── build.gradle            # Корневой gradle
```

---

## Flavors

- **battery** — `com.zetarapower.monitor.bl` — Battery Monitor приложение
